<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Upgrade Calculators</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #121212;
      color: #e0e0e0;
      padding: 20px;
    }
    .container {
      background: #1e1e1e;
      max-width: 600px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    input, button {
      width: 100%;
      padding: 10px;
      margin: 8px 0;
      font-size: 1rem;
      background-color: #2d2d2d;
      color: #e0e0e0;
      border: 1px solid #444;
      border-radius: 5px;
    }
    button {
      background-color: #007bff;
      color: white;
      border: none;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    button:hover {
      background-color: #0056b3;
    }
    .result {
      font-weight: bold;
      margin-top: 15px;
      padding: 10px;
      background-color: #252525;
      border-radius: 5px;
    }
    label {
      display: block;
      margin: 8px 0;
    }
    h2 {
      margin-top: 0;
      color: #ffffff;
    }
    input[type="checkbox"] {
      width: auto;
      margin-right: 10px;
      vertical-align: middle;
    }
    .checkbox-label {
      display: flex;
      align-items: center;
      margin: 10px 0;
    }
  </style>
</head>
<body>

  <!-- Castle Calculator -->
  <div class="container">
    <h2>Castle Time & Cost Calculator</h2>
    <label for="startLevel">Start Level (0-64):</label>
    <input type="number" id="startLevel" min="0" max="64">

    <label for="endLevel">End Level (1-65):</label>
    <input type="number" id="endLevel" min="1" max="65">

    <label for="buff">% Build Speed Buff:</label>
    <input type="text" id="buff" placeholder="e.g. 0, 25, 104.25" value="0">

    <button onclick="calculateTime()">Calculate Castle Time & Cost</button>
    <div class="result" id="result"></div>
  </div>

  <!-- Hero Research Calculator -->
  <div class="container">
    <h2>Hero Research Calculator</h2>
    <label for="startHeroLevel">Start Level (0-79):</label>
    <input type="number" id="startHeroLevel" min="0" max="79">

    <label for="endHeroLevel">End Level (1-80):</label>
    <input type="number" id="endHeroLevel" min="1" max="80">

    <label for="heroBuff">% Research Buff:</label>
    <input type="text" id="heroBuff" placeholder="e.g. 0, 25, 104.25" value="0">

    <label class="checkbox-label">
      <input type="checkbox" id="discountCheckbox"> Apply 15% Sait Cost Discount
    </label>

    <button onclick="calculateHeroTime()">Calculate Research Time & Cost</button>
    <div class="result" id="heroResult"></div>
  </div>

  <!-- Troop Research Calculator -->
  <div class="container">
    <h2>Troop Research Calculator</h2>
    <label for="startTroopLevel">Start Level (0-39):</label>
    <input type="number" id="startTroopLevel" min="0" max="39">

    <label for="endTroopLevel">End Level (1-40):</label>
    <input type="number" id="endTroopLevel" min="1" max="40">

    <label for="troopBuff">%  Research Buff:</label>
    <input type="text" id="troopBuff" placeholder="e.g. 0, 25, 104.25" value="0">

    <label class="checkbox-label">
      <input type="checkbox" id="troopDiscountCheckbox"> Apply 15% Sait Cost Discount
    </label>

    <button onclick="calculateTroopTime()">Calculate Research Time & Cost</button>
    <div class="result" id="troopResult"></div>
  </div>

  <script>
    // Castle data
    const times = [
480, 900, 1200, 2400, 3600, 4800, 7200, 9600, 12000, 13200, 14400, 16200,
    17400, 19200, 20400, 22200, 24000, 25200, 27000, 28800, 31200, 33000,
    35400, 37200, 39600, 42600, 45000, 48000, 51600, 55200, 58800, 63600,
    67800, 73200, 79200, 85800, 93600, 102000, 111000, 121800, 133800, 147600,
    163200, 181200, 201000, 224400, 250800, 280800, 315000, 354600, 399600,
    432000, 480000, 526200, 544200, 580800, 616800, 653400, 689400, 726000,
    763200, 801000, 839400, 878400, 918000, 958200, 999000, 1040400, 1082400,
    1125000, 1181280, 1240320, 1302360, 1367460, 1435860, 1507680, 1583040,
    1662180, 1745280, 1832520
    ];

    const costs = [
      0,320,460,670,920,1100,1900,3400,5400,7700,10000,13000,15000,18000,21000,
      25000,30000,35000,40000,47000,54000,62000,72000,84000,99000,120000,
      130000,150000,180000,200000,230000,260000,290000,330000,370000,410000,
      460000,510000,570000,630000,720000,888000,1176000,1512000,1896000,
      2430000,3033000,3723000,4562000,5560000,5902000,6273000,6672000,7099000,
      7556000,8040000,8554000,9095000,9666000,10264000,10892000,11547000,
      12232000,12944000,13686000
    ];

    // Hero data
    const heroTimes = [
      480, 900, 1200, 2400, 3600, 4800, 7200, 9600, 12000, 13200, 14400, 16200, 17400,
      19200, 20400, 22200, 24000, 25200, 27000, 28800, 31200, 33000, 35400, 37200,
      39600, 42600, 45000, 48000, 51600, 55200, 58800, 63600, 67800, 73200, 79200,
      85800, 93600, 102000, 111000, 121800, 133800, 147600, 163200, 181200, 201000,
      224400, 250800, 280800, 315000, 354600, 399600, 432000, 480000, 526200, 544200,
      580800, 616800, 653400, 689400, 726000, 763200, 801000, 839400, 878400, 918000,
      958200, 999000, 1040400, 1082400, 1125000, 1181280, 1240320, 1302360, 1367460,
      1435860, 1507680, 1583040, 1662180, 1745280, 1832520
    ];

    const heroCosts = [
      170, 330, 460, 960, 1500, 2100, 3200, 4500, 5800, 6600, 7400, 8600, 9600,
      11000, 12000, 13000, 15000, 16000, 18000, 19000, 21000, 23000, 25000, 27000,
      30000, 33000, 35000, 39000, 44000, 48000, 52000, 57000, 62000, 68000, 75000,
      83000, 92000, 100000, 110000, 120000, 140000, 170000, 190000, 210000, 270000,
      340000, 400000, 470000, 580000, 710000, 870000, 1000000, 1200000, 1300000,
      1400000, 1500000, 1700000, 1900000, 2000000, 2200000, 2400000, 2600000,
      2800000, 3000000, 3200000, 3400000, 3600000, 3800000, 4000000, 4200000,
      4500000, 4700000, 4900000, 5200000, 5500000, 5700000, 6000000, 6300000,
      6600000, 7000000, 7300000
    ];

    // Corrected Troop data (fixed the cost for level 14)
    const troopTimes = [
      600, 960, 1560, 2340, 3900, 5460, 7800, 10080, 13200, 16320,
      21000, 25680, 31080, 38100, 45120, 54420, 64560, 76980, 93300, 108840,
      124440, 155520, 178860, 209940, 256620, 303240, 365460, 435480, 520980, 629880,
      762180, 922260, 1115940, 1350300, 1633860, 1977000, 2392200, 2894580, 3502440, 4237980
    ];

    const troopCosts = [
  800, 1200, 2000, 3000, 5000, 7000, 10000, 13000, 17000, 21000,
  27000, 33000, 40000, 49000, 58000, 70000, 83000, 99000, 120000, 140000,
  160000, 200000, 230000, 270000, 330000, 390000, 470000, 560000, 670000, 810000,
  998000, 1208000, 1462000, 1769000, 2140000, 2590000, 3134000, 3792000, 4588000, 5552000
];


    function calculateTime() {
      const startLevel = parseInt(document.getElementById('startLevel').value) || 0;
      const endLevel = parseInt(document.getElementById('endLevel').value) || 1;
      const buffInput = document.getElementById('buff').value.replace(',', '.');
      const buff = parseFloat(buffInput) || 0;

      if (isNaN(startLevel) || isNaN(endLevel) || startLevel < 0 || endLevel > 65 || startLevel >= endLevel || buff < 0) {
        document.getElementById('result').textContent = 'Please enter valid inputs for Castle calculation.';
        return;
      }

      let totalTime = 0;
      let totalCost = 0;

      for (let i = startLevel; i < endLevel; i++) {
        totalTime += times[i] / (1 + buff / 100);
        totalCost += costs[i];
      }

      const days = Math.floor(totalTime / 86400);
      const hours = Math.floor((totalTime % 86400) / 3600);
      const minutes = Math.floor((totalTime % 3600) / 60);
      const totalHours = (totalTime / 3600).toFixed(2);

      document.getElementById('result').innerHTML =
        `Total  Build Time: ${days}d ${hours}h ${minutes}m<br>` +
        `OR ~${totalHours} hours<br>` +
        `Total Cost: ${totalCost.toLocaleString()} lumber`;
    }

    function calculateHeroTime() {
      const start = parseInt(document.getElementById('startHeroLevel').value) || 0;
      const end = parseInt(document.getElementById('endHeroLevel').value) || 1;
      const buffInput = document.getElementById('heroBuff').value.replace(',', '.');
      const buff = parseFloat(buffInput) || 0;
      const discount = document.getElementById('discountCheckbox').checked;

      if (isNaN(start) || isNaN(end) || start < 0 || end > 80 || start >= end) {
        document.getElementById('heroResult').textContent = 'Please enter valid level inputs for Hero Research.';
        return;
      }

      if (buff < 0) {
        document.getElementById('heroResult').textContent = 'Research speed buff cannot be negative.';
        return;
      }

      let totalTime = 0;
      let totalCost = 0;

      for (let i = start; i < end; i++) {
        totalTime += heroTimes[i] / (1 + buff / 100);
        totalCost += heroCosts[i];
      }

      if (discount) {
        totalCost = Math.round(totalCost * 0.85);
      }

      const days = Math.floor(totalTime / 86400);
      const hours = Math.floor((totalTime % 86400) / 3600);
      const minutes = Math.floor((totalTime % 3600) / 60);
      const totalHours = (totalTime / 3600).toFixed(2);

      document.getElementById('heroResult').innerHTML =
        `Total  Research Time: ${days}d ${hours}h ${minutes}m<br>` +
        `OR ~${totalHours} hours<br>` +
        `Total Cost: ${totalCost.toLocaleString()} Resource`;
    }

    function calculateTroopTime() {
      const start = parseInt(document.getElementById('startTroopLevel').value) || 0;
      const end = parseInt(document.getElementById('endTroopLevel').value) || 1;
      const buffInput = document.getElementById('troopBuff').value.replace(',', '.');
      const buff = parseFloat(buffInput) || 0;
      const discount = document.getElementById('troopDiscountCheckbox').checked;

      if (isNaN(start) || isNaN(end) || start < 0 || end > 40 || start >= end) {
        document.getElementById('troopResult').textContent = 'Please enter valid level inputs for Troop Training.';
        return;
      }

      if (buff < 0) {
        document.getElementById('troopResult').textContent = 'Training speed buff cannot be negative.';
        return;
      }

      let totalTime = 0;
      let totalCost = 0;

      for (let i = start; i < end; i++) {
        totalTime += troopTimes[i] / (1 + buff / 100);
        totalCost += troopCosts[i];
      }

      if (discount) {
        totalCost = Math.round(totalCost * 0.85);
      }

      const days = Math.floor(totalTime / 86400);
      const hours = Math.floor((totalTime % 86400) / 3600);
      const minutes = Math.floor((totalTime % 3600) / 60);
      const totalHours = (totalTime / 3600).toFixed(2);

      document.getElementById('troopResult').innerHTML =
        `Total Research Time: ${days}d ${hours}h ${minutes}m<br>` +
        `OR ~${totalHours} hours<br>` +
        `Total Cost: ${totalCost.toLocaleString()} Resource`;
    }

    // Verify troop costs total for 0-40
    function verifyTroopCosts() {
        let totalTroopCost = 0;
for (let i = 0; i < 40; i++) {
  totalTroopCost += troopCosts[i];
}
console.log(totalTroopCost);
    }
    verifyTroopCosts();
  </script>
</body>
</html>
